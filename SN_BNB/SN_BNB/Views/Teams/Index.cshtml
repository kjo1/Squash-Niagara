@model PaginatedList<SN_BNB.Models.Team>

@{
    ViewData["Title"] = "Index";
}

<link href="~/css/team.css" rel="stylesheet" />

<div class="container bg-light">

    <h2 class="pt-3">Teams</h2>

    @if (User.IsInRole("Admin"))
    {<p id="createNew">
            <a style="color:purple;" asp-action="Create">Create New</a>
        </p>
    }


     <form asp-action="Index">

         <nav class="navbar navbar-expand-lg navbar-light bg-light">
             <a class="navbar-brand" href="#"></a>
             <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                 <span class="navbar-toggler-icon"></span>
             </button>
             <div class="collapse navbar-collapse" id="navbarSupportedContent">
                 <ul class="navbar mr-auto" style="list-style:none">
                     <li class="nav-item">
                         <span> </span>
                     </li>
                 </ul>

                 @Html.DropDownList("DivisionID", null, "All Divisions", htmlAttributes: new { @class = "form-control", @style = "width:250px; margin-right:10px", onchange = "this.form.submit();" })
                 @Html.TextBox("searchString", null, htmlAttributes: new { @class = "form-control", @placeholder = "Search by Team" })
                 <button id="btnSearch" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
             </div>
         </nav>

         <input type="hidden" name="postBack" value="a" />
         <input type="hidden" name="sortDirection" value="@ViewData["sortDirection"]" />
         <input type="hidden" name="sortField" value="@ViewData["sortField"]" />

         <div class="table-responsive-sm">
             <table class="table table-light table-hover table-striped">
                 <thead class="thead-light">
                     <tr>
                         <th>
                             <input id="playCol" type="submit" name="actionButton" value="Team Name" class="btn btn-link" asp-route-sortOrder="@ViewData["TeamSortPar"]" asp-route-currentFilter="@ViewData["CurrentFilter"]" />
                         </th>
                         <th>
                             <input id="playCol" type="submit" name="actionButton" value="Won" class="btn btn-link" asp-route-sortOrder="@ViewData["WonSortPar"]" asp-route-currentFilter="@ViewData["CurrentFilter"]" />
                         </th>
                         <th>
                             <input id="playCol" type="submit" name="actionButton" value="Lost" class="btn btn-link" asp-route-sortOrder="@ViewData["LostSortPar"]" asp-route-currentFilter="@ViewData["CurrentFilter"]" />
                         </th>
                         <th>
                             <input id="playCol" type="submit" name="actionButton" value="Point(s)" class="btn btn-link" asp-route-sortOrder="@ViewData["PointsSortPar"]" asp-route-currentFilter="@ViewData["CurrentFilter"]" />
                         </th>
                         <th>
                             <input id="playCol" type="submit" name="actionButton" value="Division" class="btn btn-link" asp-route-sortOrder="@ViewData["DivisionSortPar"]" asp-route-currentFilter="@ViewData["CurrentFilter"]" />
                         </th>
                         <th></th>
                     </tr>
                 </thead>
                 <tbody>
                     @foreach (var item in Model)
                     {
                         <tr>
                             <td id="aa">
                                 <a asp-action="Details" asp-route-id="@item.ID">@Html.DisplayFor(modelItem => item.TeamName) </a>
                             </td>
                             <td>
                                 @Html.DisplayFor(modelItem => item.TeamWins)
                             </td>
                             <td>
                                 @Html.DisplayFor(modelItem => item.TeamLosses)
                             </td>
                             <td>
                                 <span data-toggle="tooltip" title="" data-original-title="Points earned by team">
                                     @Html.DisplayFor(modelItem => item.TeamPoints)
                                 </span>
                             </td>
                             <td>
                                 @Html.DisplayFor(modelItem => item.Division.DivisionName)
                             </td>
                             <td>
                                 @if (User.IsInRole("Admin") || User.IsInRole("Captain"))
                                 {
                                     @if (ViewBag.CaptainTeamID == -1 || item.ID == ViewBag.CaptainTeamID)
                                     {
                                         <a asp-action="Edit" asp-route-id="@item.ID">
                                             <img src="~/images/edit.png" style="width:28px; height:28px" data-toggle="tooltip" title="Edit" />
                                         </a>

                                     }
                                 }
                                 @if (User.IsInRole("Admin"))
                                 {
                                     <span>|</span>
                                     <a asp-action="Delete" asp-route-id="@item.ID">
                                         <img src="~/images/Archive.png" style="width:28px; height:28px" data-toggle="tooltip" title="Archive" />
                                     </a>
                                 }
                             </td>
                         </tr>
                     }
                 </tbody>
             </table>
             @{
                 var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
                 var nextDisabled = !Model.HasNextPage ? "disabled" : "";
             }

             <a asp-action="Index"
                asp-route-sortOrder="@ViewData["CurrentSort"]"
                asp-route-page="@(Model.PageIndex - 1)"
                asp-route-currentFilter="@ViewData["CurrentFilter"]"
                class="btn btn-default @prevDisabled">
                 Previous
             </a>
             <a asp-action="Index"
                asp-route-sortOrder="@ViewData["CurrentSort"]"
                asp-route-page="@(Model.PageIndex + 1)"
                asp-route-currentFilter="@ViewData["CurrentFilter"]"
                class="btn btn-default @nextDisabled">
                 Next
             </a>
         </div>
     </form>
</div>
